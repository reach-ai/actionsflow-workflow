on:
  rss:
    url: 
      - https://hnrss.org/newest?points=300&count=3
      - https://www.apartmenttherapy.com/main.rss
      - https://stylebyemilyhenderson.com/feed
      - https://feeds.feedburner.com/younghouselove
      - https://cococozy.com/feed/
      - https://design-milk.com/feed/
      - https://www.dezeen.com/feed/
      - https://www.home-designing.com/feed
    config:
      limit: 10
      every: "*/5 * * * *" # every 5 mins
      # debug: true
jobs:
  print:
    name: Print
    runs-on: ubuntu-latest
    steps:
      - name: Print Outputs
        env:
          title: ${{on.rss.outputs.title}}
          contentSnippet: ${{on.rss.outputs.contentSnippet}}
          link: ${{on.rss.outputs.link}}
        run: |
          echo title: $title
          echo contentSnippet: $contentSnippet
          echo link: $link
      - name: Send POST Request
        env:
          title: ${{on.rss.outputs.title}}
          contentSnippet: ${{on.rss.outputs.contentSnippet}}
          link: ${{on.rss.outputs.link}}
        run: |
          curl --location 'https://dream-s47zheng.k8s.csclub.cloud/discord' \
          --header 'Content-Type: application/json' \
          --header 'Authorization: Bearer ${{ secrets.DREAM_API_KEY }}' \
          --data '{
            "text": "'"$title"'",
            "link": "'"$link"'"
          }'

